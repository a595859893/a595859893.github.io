<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Wuny" />


    
    


<meta name="description" content="并没有什么特别的东西，十分简陋的小屋">
<meta property="og:type" content="website">
<meta property="og:title" content="简陋的小屋">
<meta property="og:url" content="https://a595859893.github.io/index.html">
<meta property="og:site_name" content="简陋的小屋">
<meta property="og:description" content="并没有什么特别的东西，十分简陋的小屋">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="简陋的小屋">
<meta name="twitter:description" content="并没有什么特别的东西，十分简陋的小屋">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="简陋的小屋" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/favicon.ico">





    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>简陋的小屋</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: false,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Wuny</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">文章</a></li>
                        
                            <li><a href="/tags/">标签</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPP/">CPP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/">NLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NeuralNetwork/">NeuralNetwork</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hyperv/">hyperv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ntpd/">ntpd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/regexp/">regexp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vm/">vm</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">咸鱼一条，嗯</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Wuny</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Wuny</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">文章</a></li>
                
                    <li><a href="/tags/">标签</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-go协程整理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2021/03/31/go协程整理/" class="article-date">
      <time datetime="2021-03-31T15:15:06.000Z" itemprop="datePublished">2021-03-31</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/03/31/go协程整理/">go协程整理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>虽然写了不少go的代码了，但是对于go本身的了解还处于比较片面的阶段，因此在后续几天内打算将基础慢慢补回来。</p>
<p>就从go的协程部分开始整理吧</p>
<h1 id="什么是协程"><a href="#什么是协程" class="headerlink" title="什么是协程"></a>什么是协程</h1><h2 id="多核的流行"><a href="#多核的流行" class="headerlink" title="多核的流行"></a>多核的流行</h2><p>由于单核性能提升的成本越来越高，出于性能和成本的考虑，多核心逐渐成为主流。但虽然硬件上多核已经有了实现，能充分利用多核特性的程序比例仍然比较小。</p>
<h2 id="进程、线程、协程"><a href="#进程、线程、协程" class="headerlink" title="进程、线程、协程"></a>进程、线程、协程</h2><p>多进程、线程或协程都可以利用多核心的特性，但是他们具有不同的特点：</p>
<p>进程是资源分配的最小单位，同一时间执行的进程数不会超过核心数目，由于进程的上下文切换需要切换页目录、内核栈和硬件上下文，其上下文切换开销较高。同时页缓存的切换会导致cache失效，使得cache的命中率降低。</p>
<p>线程上下文切换不需要切换页目录（虚拟内存空间相同），而只需要切换内核栈和硬件上下文，因此其开销低于进程，相对来说更加轻量。多核中线程一般是利用开发者接口，由内核完成到处理器的映射，实现并行。但由于内核栈和硬件上下文的切换仍然需要操作系统协助，需要陷入内核态，因此依旧存在一定开销。</p>
<p>协程占用资源小，由用户进行调度（内核无感知），因此不必陷入内核中（没有内核上下文切换）。由于通常情况下用户调度会使用比线程更轻量的上下文（通常是更少的寄存器和动态大小的栈），因此创建开销以及上下文切换开销会比线程更低。除此之外，同一线程上的协程不会出现写变量冲突（因为它们本身就不会同时执行），因此控制共享资源不必加锁而只要判断状态。</p>
<h2 id="如何根据情况来使用"><a href="#如何根据情况来使用" class="headerlink" title="如何根据情况来使用"></a>如何根据情况来使用</h2><p>多进程（稳定性）：由于进程通常各用独立的内存区间，进程的崩溃不会影响到其它进程的运行，因此具有更好的稳定性，相比之下线程和协程的崩溃会导致进程崩溃，进而影响到同进程下的其它线程或协程（因为它们共享相同的资源）。</p>
<p>多线程（并行计算任务）：多核处理器情况下，并行依靠线程，由内核完成线程到处理器映射的。协程的轻量化设计是为了降低上下文切换开销，并不会在并行计算上带来优势（同一线程上的协程同时只会有一个在执行，因此单线程上开大量协程并不能提高计算的并行度）。更加轻量的上下位在计算过程可能反而引起额外开销（动态栈或共享栈的设计引发的额外栈检查、栈内存分配和栈内存复制操作等）</p>
<p>协程（阻塞频繁的任务）：不必进入内核态和更轻量的上下文使其在面临阻塞的时候被调度的开销更低，因此当任务存在大量频繁的阻塞和唤起时，协程的开销会小于线程（提高了并发度，而非并行度）。同时由于同线程内的协程不会出现写变量冲突。</p>
<p>三者的使用中就个人理解：进程倾向于隔离（安全性），线程倾向于并行，而协程倾向于异步。</p>
<h1 id="协程的特点"><a href="#协程的特点" class="headerlink" title="协程的特点"></a>协程的特点</h1><p>综上总结之后，协程的特点如下：</p>
<ul>
<li>由用户自己进行调度，减少上下文切换，提高效率</li>
<li>栈更小，在同内存中可以比线程开启更多的数量</li>
<li>协程在同一线程上，可以避免竞争关系而使用锁</li>
<li>适用于被阻塞且需要大量并发的场景，但不适用于大量计算并发场景，计算型场景更适合使用线程实现</li>
</ul>
<h1 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h1><p>goroutine有些类似于协程，但它不像是nodejs那种单线程下的携程，它是基于内核线程上的轻量抽象，使用GMP模型抽象（下详述）。</p>
<p>goroutine的调度方式是协同式的，在协同式调度中，没有时间片的概念。为了并行执行goroutine，调度器会在以下几个时间点对其进行切换：</p>
<ul>
<li>Channel接收或者发送会造成阻塞的消息</li>
<li>当一个新的goroutine被创建时</li>
<li>可以造成阻塞的系统调用，如文件和网络操作</li>
<li>垃圾回收</li>
</ul>
<p>尽管调度方式是协同式的，但是go考虑到协程饿死的情况，针对其抢占机制（详见参考资料《Implemention of golang》），同时由于我们不能保证goroutine全都在同一个线程上，因此它不具有协程中不会引起冲突的特点，开发时我们仍需要考虑临界区等因素。</p>
<p>相比nodejs的回调函数方式解决异步的处理方式带来的繁杂嵌套，golang使用了goroutine+channel的设计思路，让异步代码编写时能以一种更加线性的思维来完成，降低了开发人员的精神负担。</p>
<h1 id="GMP模型"><a href="#GMP模型" class="headerlink" title="GMP模型"></a>GMP模型</h1><p>Golang的调度器中存在三个概念：</p>
<ul>
<li>Processor（P）</li>
<li>OSThread（M）</li>
<li>Goroutines（G）</li>
</ul>
<p>详情待续，也可参考参考资料中《Go的并发机制：线程模型》</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><h2 id="待看"><a href="#待看" class="headerlink" title="待看"></a>待看</h2><p><a href="https://www.jianshu.com/p/8063a82edf0e" target="_blank" rel="noopener">Go的并发机制：线程模型</a><br><a href="https://docs.google.com/document/d/1wAaf1rYoM4S4gtnPh0zOlGzWtrZFQ5suE8qr2sD8uWQ/pub" target="_blank" rel="noopener">golang设计文档</a></p>
<h2 id="已参考"><a href="#已参考" class="headerlink" title="已参考"></a>已参考</h2><p><a href="https://www.jianshu.com/p/80bde972196d" target="_blank" rel="noopener">进程、线程、协程</a><br><a href="https://blog.csdn.net/liyangxueit/article/details/108510518" target="_blank" rel="noopener">进程、线程上下文切换的开销</a><br><a href="http://c.biancheng.net/view/5154.html" target="_blank" rel="noopener">多进程编程和多线程编程优缺点</a><br><a href="https://www.oschina.net/news/78542/how-wechat-support-800-million-users-by-libco" target="_blank" rel="noopener">微信libco协程介绍</a><br><a href="https://zhuanlan.zhihu.com/p/74047342" target="_blank" rel="noopener">Golang协程详解和应用</a><br><a href="https://www.cnblogs.com/liang1101/p/7285955.html" target="_blank" rel="noopener">Golang 之协程详解</a><br><a href="https://blog.csdn.net/weixin_30851867/article/details/101808108" target="_blank" rel="noopener">Go语言中Goroutine与线程的区别</a><br><a href="https://cloud.tencent.com/developer/article/1573101" target="_blank" rel="noopener">Go语言程序设计 读书笔记</a><br><a href="https://segmentfault.com/a/1190000010634291" target="_blank" rel="noopener">Go语言的栈空间管理</a><br><a href="https://colobu.com/2020/12/20/threads-in-go-runtime/" target="_blank" rel="noopener">Go 运行程序中的线程数</a><br><a href="https://tracymacding.gitbooks.io/implementation-of-golang/content/" target="_blank" rel="noopener">Implemention of golang</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/go/">go</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-cgo中向C部分函数传入go的slice" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/10/cgo中向C部分函数传入go的slice/" class="article-date">
      <time datetime="2020-05-10T14:01:36.000Z" itemprop="datePublished">2020-05-10</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/10/cgo中向C部分函数传入go的slice/">cgo中向C部分函数传入go的slice</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>注意事项：</p>
<p>传入C函数中的slice需要以<code>&amp;array[0]</code>的形式进行，而不能单纯使用<code>&amp;array</code>，因为go中的slice数据结构不仅仅具有首地址。</p>
<h2 id="类型对应表"><a href="#类型对应表" class="headerlink" title="类型对应表"></a>类型对应表</h2><table>
<thead>
<tr>
<th>type</th>
<th>C</th>
<th>go</th>
</tr>
</thead>
<tbody>
<tr>
<td>char</td>
<td>C.char</td>
<td>byte</td>
</tr>
<tr>
<td>signed</td>
<td>C.schar</td>
<td>int8</td>
</tr>
<tr>
<td>unsigned char</td>
<td>C.uchar</td>
<td>uint8</td>
</tr>
<tr>
<td>short int</td>
<td>C.short</td>
<td>int16</td>
</tr>
<tr>
<td>short unsigned int</td>
<td>C.ushort</td>
<td>uint16</td>
</tr>
<tr>
<td>int</td>
<td>C.int</td>
<td>int</td>
</tr>
<tr>
<td>unsigned int</td>
<td>C.uint</td>
<td>uint32</td>
</tr>
<tr>
<td>long int</td>
<td>C.long</td>
<td>int32/int64</td>
</tr>
<tr>
<td>long unsigned int</td>
<td>C.ulong</td>
<td>uint32/uint64</td>
</tr>
<tr>
<td>long long int</td>
<td>C.longlong</td>
<td>int64</td>
</tr>
<tr>
<td>long long unsigned int</td>
<td>C.ulonglong</td>
<td>uint64</td>
</tr>
<tr>
<td>float</td>
<td>C.float</td>
<td>float32</td>
</tr>
<tr>
<td>double</td>
<td>C.double</td>
<td>float64</td>
</tr>
<tr>
<td>wchar_t</td>
<td>C.wchar_t</td>
<td></td>
</tr>
<tr>
<td>void *</td>
<td>unsafe.Pointer</td>
</tr>
</tbody>
</table>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">struct test_t&#123;</span></span><br><span class="line"><span class="comment">	int a;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">void setInt(void *t)&#123;</span></span><br><span class="line"><span class="comment">	unsigned long *arr = (unsigned long *)t;</span></span><br><span class="line"><span class="comment">	for(int i=0;i&lt;10;i++)&#123;</span></span><br><span class="line"><span class="comment">		arr[i] = i;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">void setTest(void *t)&#123;</span></span><br><span class="line"><span class="comment">	struct test_t *m = (struct test_t *)t;</span></span><br><span class="line"><span class="comment">	m-&gt;a = 10;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// #cgo 386 CFLAGS: -DX86=1</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"C"</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"unsafe"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> test <span class="keyword">struct</span> &#123;</span><br><span class="line">	a <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	arr := <span class="built_in">make</span>([]C.ulong, <span class="number">10</span>)</span><br><span class="line">	t := test&#123;&#125;</span><br><span class="line">	C.setInt(unsafe.Pointer(&amp;arr[<span class="number">0</span>]))</span><br><span class="line">	C.setTest(unsafe.Pointer(&amp;t))</span><br><span class="line">	fmt.Println(arr)</span><br><span class="line">	fmt.Println(t)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/go/">go</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="w-Python爬虫" class="article article-type-w" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/27/Python爬虫/" class="article-date">
      <time datetime="2020-03-27T11:01:53.000Z" itemprop="datePublished">2020-03-27</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/27/Python爬虫/">爬虫</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>前端保存结构代码（代码源于网络）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">console</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.save = <span class="function"><span class="keyword">function</span> (<span class="params">data, filename</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!data) &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">'Console.save: No data'</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!filename) filename = <span class="string">'console.json'</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">"object"</span>) &#123;</span><br><span class="line">            data = <span class="built_in">JSON</span>.stringify(data, <span class="literal">undefined</span>, <span class="number">4</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> blob = <span class="keyword">new</span> Blob([data], &#123; <span class="attr">type</span>: <span class="string">'text/ json'</span> &#125;),</span><br><span class="line">            e = <span class="built_in">document</span>.createEvent(<span class="string">'MouseEvents'</span>),</span><br><span class="line">            a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">        a.download = filename</span><br><span class="line">        a.href = <span class="built_in">window</span>.URL.createObjectURL(blob)</span><br><span class="line">        a.dataset.downloadurl = [<span class="string">'text / json'</span>, a.download, a.href].join(<span class="string">': '</span>)</span><br><span class="line">        e.initMouseEvent(<span class="string">'click'</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="built_in">window</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="number">0</span>, <span class="literal">null</span>)</span><br><span class="line">        a.dispatchEvent(e)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(<span class="built_in">console</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用方法：console.save(obj)</span></span><br></pre></td></tr></table></figure></p>
<p>Python爬取的编码转换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment"># 获取当前网站编码并转换</span></span><br><span class="line">r = requests.get(website)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前网站编码并转换</span></span><br><span class="line"><span class="keyword">if</span> r.encoding == <span class="string">'ISO-8859-1'</span>:</span><br><span class="line">    encodings = requests.utils.get_encodings_from_content(r.text)</span><br><span class="line">    <span class="keyword">if</span> encodings:</span><br><span class="line">        encoding = encodings[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        encoding = r.apparent_encoding</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    encoding = r.encoding</span><br><span class="line">encode_content = r.content.decode(</span><br><span class="line">    encoding, <span class="string">'replace'</span>).encode(<span class="string">'utf-8'</span>, <span class="string">'replace'</span>)</span><br><span class="line">soup = BeautifulSoup(encode_content, features=<span class="string">"html.parser"</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-HyperV与其它虚拟机的冲突" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/21/HyperV与其它虚拟机的冲突/" class="article-date">
      <time datetime="2020-03-21T02:24:00.000Z" itemprop="datePublished">2020-03-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/21/HyperV与其它虚拟机的冲突/">HyperV与其它虚拟机的冲突</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>参考资料：<br><a href="https://www.zhihu.com/question/306350820" target="_blank" rel="noopener">https://www.zhihu.com/question/306350820</a><br><a href="https://www.zhihu.com/question/38841757" target="_blank" rel="noopener">https://www.zhihu.com/question/38841757</a></p>
<p>原因是现代硬件虚拟化技术基于独占的技术<br>没找到不重启的情况下切换的方法，但是找到了在开机的时候可以选择选项的方法</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /<span class="built_in">copy</span> &#123;current&#125; /d "Windows10 no Hyper-V"</span><br><span class="line">bcdedit /<span class="built_in">set</span> &#123;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&#125; hypervisorlaunchtype OFF</span><br></pre></td></tr></table></figure>
<p>其中第二条的{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX} 是执行第一条的输出</p>
<p>需要在cmd下执行，PowerShell下会出现参数错误的问题，原因是PowerShell下需要转义花括号，而转移在PowerShell中是反引号<code>`</code>而不是反斜杠<code>\</code> </p>
<p>写了个自动化指令，用正则表达式提取GUID，这样第二行就不需要自己复制了<br>（虽然并没有什么意义）</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$output</span>=bcdedit /copy `&#123;current`&#125; /d <span class="string">"No Hyper-V"</span>; <span class="variable">$output</span> <span class="nomarkup">-match</span> <span class="string">'\&#123;.+\&#125;'</span>; bcdedit /set <span class="variable">$matches</span>[<span class="number">0</span>] hypervisorlaunchtype OFF</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hyperv/">hyperv</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vm/">vm</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-配置时钟同步ntpd服务" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/17/配置时钟同步ntpd服务/" class="article-date">
      <time datetime="2020-03-17T04:27:59.000Z" itemprop="datePublished">2020-03-17</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/17/配置时钟同步ntpd服务/">配置时钟同步ntpd服务</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="安装NTP"><a href="#安装NTP" class="headerlink" title="安装NTP"></a>安装NTP</h1><p>NTP在安装的时候会有人工设置的选项，因为想要自动化安装，所以希望可以跳过人为设置时区这一步</p>
<p>查询得知是tzdata安装导致的原因，可以设置环境变量来禁止交互</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ln -fs /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">export DEBIAN_FRONTEND=noninteractive</span><br><span class="line">apt-get install -y tzdata</span><br><span class="line">dpkg-reconfigure --frontend noninteractive tzdata</span><br></pre></td></tr></table></figure>
<p>参考资料：<a href="https://stackoverflow.com/questions/44331836/apt-get-install-tzdata-noninteractive" target="_blank" rel="noopener">https://stackoverflow.com/questions/44331836/apt-get-install-tzdata-noninteractive</a></p>
<p>然后再安装ntp就不会有提示了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install ntp -y</span><br></pre></td></tr></table></figure>
<p>修改<code>/etc/ntp.conf</code>配置改变ntp服务，然后启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ntpd start</span><br></pre></td></tr></table></figure>
<p>在此之前可以考虑使用ntpdate来预先同步一下时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install ntpdate -y</span><br><span class="line">ntpdate cn.pool.ntp.org</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ntpd/">ntpd</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-正则表达式相关" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/16/正则表达式相关/" class="article-date">
      <time datetime="2020-03-16T02:22:23.000Z" itemprop="datePublished">2020-03-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/16/正则表达式相关/">正则表达式相关</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="支持情况"><a href="#支持情况" class="headerlink" title="支持情况"></a>支持情况</h1><h2 id="NET"><a href="#NET" class="headerlink" title=".NET"></a>.NET</h2><p>支持平衡组（目前已知提供支持的还包括Perl、PHP）<br>正则语法的支持情况相当全</p>
<ul>
<li><code>Visual Studio</code>使用<code>.NET</code>正则：<a href="https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/regular-expression-language-quick-reference#backreference-constructs" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/regular-expression-language-quick-reference#backreference-constructs</a></li>
</ul>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><p>总算支持前向查询了，可喜可贺<br>不支持平衡组(网上的JS平衡组教程其实是PHP版的……至少在2020/3/16日之前，自己验证是不支持的)</p>
<ul>
<li><code>VSCode</code>查询上使用<code>Javascript</code>正则（源码上的感觉，但是没有具体文档指出，据说是魔改过的）</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/regexp/">regexp</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-用Powershell设置任务计划" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/14/用Powershell设置任务计划/" class="article-date">
      <time datetime="2020-03-14T13:09:30.000Z" itemprop="datePublished">2020-03-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/14/用Powershell设置任务计划/">用Powershell设置任务计划</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="https://www.pstips.net/about-scheduledjob.html" target="_blank" rel="noopener">https://www.pstips.net/about-scheduledjob.html</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/powershell/">powershell</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-go相关" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/11/go相关/" class="article-date">
      <time datetime="2020-03-11T09:50:58.000Z" itemprop="datePublished">2020-03-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/11/go相关/">go相关</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>相关的库</p>
<p>gin 服务端框架<br>viper 配置读取<br>cobra 命令行响应</p>
<h3 id="字符串转换"><a href="#字符串转换" class="headerlink" title="字符串转换"></a>字符串转换</h3><p>内存拷贝用<code>string(bytes)</code>，不拷贝可用<code>(*string)(unsafe.Pointer(&amp;bytes))</code></p>
<p><a href="https://www.cnblogs.com/hitfire/p/6363725.html" target="_blank" rel="noopener">https://www.cnblogs.com/hitfire/p/6363725.html</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/go/">go</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-系统监控工具调查" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/11/系统监控工具调查/" class="article-date">
      <time datetime="2020-03-11T02:09:43.000Z" itemprop="datePublished">2020-03-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/11/系统监控工具调查/">系统监控工具调查</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>utilization, saturation, and error metrics for all resources</p>
<p>CPU utilization, memory usage, disk utilization, and network throughput</p>
<p>CPU利用率检测到目前仍然有瑕疵，部分没有指标可以导出</p>
<p>Block-I/O Latencies、File System Latency、CPU Scheduling Latency</p>
<p>参考资料：<br><a href="https://www.tuicool.com/articles/aE3U7jf" target="_blank" rel="noopener">https://www.tuicool.com/articles/aE3U7jf</a></p>
<h1 id="系统内的"><a href="#系统内的" class="headerlink" title="系统内的"></a>系统内的</h1><p><img src="https://pic3.zhimg.com/80/v2-d65908c900ed43429a56dd90d5ba201e_720w.jpg" alt="img"></p>
<p><a href="http://techblog.netflix.com/2015/11/linux-performance-analysis-in-60s.html" target="_blank" rel="noopener">http://techblog.netflix.com/2015/11/linux-performance-analysis-in-60s.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br></pre></td></tr></table></figure>
<p>查看系统平均负载，会显示最近1，5，15分钟中，运行队列中的平均进程数<br>想要运行到CPU的进程以及被非中断性的I/O阻塞的进程<br>（与时间和CPU相关的指标，显示负载随时间的变化）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | tail</span><br></pre></td></tr></table></figure>
<p>显示最新的10条系统消息<br>（与日志相关的指标，显示系统消息）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat 1</span><br></pre></td></tr></table></figure>
<p>1是参数，代表每隔多少秒统计一次<br>虚拟内存统计，对虚拟内存，CPU，进程等整体情况进行监视。</p>
<p>参数解释：<a href="https://zhuanlan.zhihu.com/p/35879028" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/35879028</a></p>
<details><br>    <summary>参数解释</summary><br>    <pre><br>       procs：<br>    - <code>r</code> - 等待CPU的进程数目<br>    - <code>b</code> - 不可中断的休眠（等待IO）的进程数目。<br>    <code>memory</code>：<br>    - <code>swapd</code> - 多少块被换出磁盘（页面交换）<br>    - <code>free</code> - 空闲的（未被使用）<br>    - <code>buff</code> - 被用作缓冲区，cache - 被用作操作系统缓存。<br>    <code>swap</code>：<br>    - <code>si</code> - 每秒有多少块正在被换入（从磁盘）<br>    - <code>so</code> - 换出（到磁盘）。<br>    <code>io</code>：<br>    - <code>bi</code> - 多少块从块设备读取<br>    - <code>bo</code> - 多少块从块设备写出<br>    <code>system</code>：<br>    - <code>in</code> - 每秒中断数<br>    - <code>cs</code> - 每秒上下文切换数。<br>    <code>cpu</code>：显示所有的CPU时间花费在各类操作的百分比<br>    - <code>us</code> - 执行用户代码（非内核）<br>    - <code>sy</code> - 执行系统代码（内核）<br>    - <code>id</code> - 空闲<br>    - <code>wa</code> - 等待IO<br>    </pre><br></details>




<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mpstat -P ALL 1</span><br><span class="line">pidstat 1</span><br><span class="line">iostat -xz 1</span><br><span class="line">free -m</span><br><span class="line">sar -n DEV 1</span><br><span class="line">sar -n TCP,ETCP 1</span><br><span class="line">top</span><br></pre></td></tr></table></figure>
<h1 id="大家介绍的"><a href="#大家介绍的" class="headerlink" title="大家介绍的"></a>大家介绍的</h1><h1 id="github上找的"><a href="#github上找的" class="headerlink" title="github上找的"></a>github上找的</h1><h1 id="StackOverflow上的"><a href="#StackOverflow上的" class="headerlink" title="StackOverflow上的"></a>StackOverflow上的</h1><h1 id="产业界的"><a href="#产业界的" class="headerlink" title="产业界的"></a>产业界的</h1><h2 id="Atlas"><a href="#Atlas" class="headerlink" title="Atlas"></a>Atlas</h2><p><a href="https://netflixtechblog.com/introducing-atlas-netflixs-primary-telemetry-platform-bd31f4d8ed9a" target="_blank" rel="noopener">https://netflixtechblog.com/introducing-atlas-netflixs-primary-telemetry-platform-bd31f4d8ed9a</a></p>
<h2 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h2><p><a href="https://netflixtechblog.com/introducing-vector-netflixs-on-host-performance-monitoring-tool-c0d3058c3f6f" target="_blank" rel="noopener">https://netflixtechblog.com/introducing-vector-netflixs-on-host-performance-monitoring-tool-c0d3058c3f6f</a></p>
<h1 id="外网推荐的"><a href="#外网推荐的" class="headerlink" title="外网推荐的"></a>外网推荐的</h1><h1 id="论文里有的"><a href="#论文里有的" class="headerlink" title="论文里有的"></a>论文里有的</h1><h1 id="方法论"><a href="#方法论" class="headerlink" title="方法论"></a>方法论</h1><h2 id="The-USE-Method"><a href="#The-USE-Method" class="headerlink" title="The USE Method"></a>The USE Method</h2><p><a href="http://www.brendangregg.com/usemethod.html" target="_blank" rel="noopener">http://www.brendangregg.com/usemethod.html</a></p>
<h2 id="Google’s-SRE-teams"><a href="#Google’s-SRE-teams" class="headerlink" title="Google’s SRE teams"></a>Google’s SRE teams</h2><p><a href="https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/#xref_monitoring_golden-signals" target="_blank" rel="noopener">https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/#xref_monitoring_golden-signals</a></p>
<p>ebpf的最大特点就是极低的负载</p>
<p>因为有了极低的负载，所以对很多之前做起来开销大的检查，现在都能够做了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Minikube安装记录" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/10/Minikube安装记录/" class="article-date">
      <time datetime="2020-03-10T14:37:03.000Z" itemprop="datePublished">2020-03-10</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/10/Minikube安装记录/">Minikube安装记录</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>参考资料：<a href="https://minikube.sigs.k8s.io/docs/start/linux/" target="_blank" rel="noopener">https://minikube.sigs.k8s.io/docs/start/linux/</a></p>
<p>安装kubectl</p>
<p>安装docker</p>
<p>下载minikube并安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 \</span><br><span class="line">  &amp;&amp; sudo install minikube-linux-amd64 /usr/local/bin/minikube</span><br></pre></td></tr></table></figure>
<p>由于云服务器不支持虚拟化，所以使用虚拟化使用None</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">minikube start --image-mirror-country cn \</span><br><span class="line">    --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.7.3.iso \</span><br><span class="line">    --registry-mirror=https://xxxxxx.mirror.aliyuncs.com</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/k8s/">k8s</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017-2021 Wuny
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>